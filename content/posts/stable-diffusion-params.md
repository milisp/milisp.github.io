+++
title = 'Stable Diffusion Params'
date = 2024-11-28T19:03:54+08:00
draft = false
+++

Stable Diffusion（简称 SD）是一个基于扩散模型的生成式 AI 图像工具，其功能和效果受到多种参数和概念的影响。以下是常见的概念及其作用介绍：  

---

### 1. **CFG（Classifier-Free Guidance Scale）**  
**作用：** 控制生成图像时对提示词的依赖程度。  
- **低值（如 1-5）：** 生成的图像更加自由，可能不完全符合提示词，但更有创意。  
- **高值（如 7-15）：** 图像严格遵循提示词描述，但可能损失一些自然性或多样性。  

**建议：** 大多数情况下使用 7-12 的范围，可以平衡提示词依赖和图像质量。

---

### 2. **Sampling（采样方法）**  
**作用：** 影响图像生成的风格和速度。常见的采样方法包括：  
- **DDIM**：速度快，生成的图像更加平滑。  
- **Euler a**：适合生成高细节图像，效果受提示词和CFG影响较大。  
- **DPM++ 系列**：新型采样器，兼具质量和效率，推荐使用 DPM++ 2M 或 DPM++ SDE K。  
- **PLMS**：适合简单场景，速度快但细节可能较少。  

**建议：** 初学者可尝试 Euler a 或 DPM++ 系列，调整 CFG 后观察效果。

---

### 3. **Steps（采样步数）**  
**作用：** 控制生成过程中进行的采样次数。  
- **低步数（如 10-20）：** 生成速度快，但细节较少。  
- **高步数（如 50-100）：** 生成图像细节丰富，但速度较慢。  

**建议：** 大多数情况下，20-50 步数足够，除非追求极高质量。

---

### 4. **Prompt（提示词）**  
**作用：** 描述希望生成的图像内容，直接影响生成结果。  
- **正向提示词（Positive Prompt）：** 定义图像主体、风格、细节，如 "a futuristic city at night, neon lights, ultra-realistic, 4k"。  
- **反向提示词（Negative Prompt）：** 排除不需要的元素，如 "blurry, low quality, deformed, text".  

**建议：** 多尝试调整提示词的顺序、权重（使用 `(word:1.2)` 表示权重），以优化结果。

---

### 5. **Seed（种子）**  
**作用：** 控制生成结果的随机性。  
- **固定 Seed：** 相同的 Seed 和参数配置会生成相同的图像。  
- **随机 Seed：** 不输入 Seed 或设置为 `-1`，每次生成结果不同。  

**建议：** 如果需要调整效果时对比变化，可以固定 Seed；探索时使用随机 Seed。

---

### 6. **Resolution（分辨率）**  
**作用：** 控制生成图像的大小，通常通过宽度和高度参数设置（如 `512x512`）。  
- 分辨率越高，生成时间越长，显存需求也更高。  
- 推荐的分辨率比例为正方形或接近正方形（如 `512x512` 或 `768x768`）。  

**建议：** 使用低分辨率（如 `512x512`）测试效果后，再提高分辨率生成高清图像。

---

### 7. **Inpainting（局部重绘）**  
**作用：** 修改图像中某个区域，保持其他部分不变。  
- 可用于修复图像瑕疵或替换特定元素。  
- 提供遮罩功能，精确控制修改区域。  

---

### 8. **ControlNet**  
**作用：** 通过预设模型（如姿态、线稿、深度图）控制生成结果的构图或形态。  
- 常见模式包括：Pose（姿态控制）、Canny Edge（线条控制）、Depth（深度控制）。  
- 提升对复杂提示词或图像生成的控制能力。  

---

### 9. **LoRA（Low-Rank Adaptation）**  
**作用：** 一种轻量化训练方法，用于快速调整模型生成风格或内容。  
- 可加载特定风格的 LoRA 模型，如某种画风、人物角色等。  
- 权重可调（如 `lora:anime_style:0.7`），影响融合效果。  

---

### 10. **Checkpoint/Model**  
**作用：** 决定生成图像的基础模型。  
- 不同模型适合生成不同风格的图像（如写实、二次元、艺术风格）。  
- 常见模型有 `SD1.5`、`SDXL` 以及社区自定义模型。  

**建议：** 根据需求选择基础模型，搭配 LoRA 或 Embedding 提升效果。  

---  

**总结：**  
Stable Diffusion 的图像生成效果由多个参数共同决定，熟练调整这些参数（如 CFG、采样器、提示词等），可以生成更符合预期的图像。初学者可以通过小范围调参逐步熟悉它们的作用与最佳配置。
